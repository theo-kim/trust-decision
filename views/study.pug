extends layout

//- Main content
block content
	div(style="position:absolute;top:0;left:0;right:0;bottom:10%;overflow:hidden;display:flex;flex-direction:column")
		div(style="background:#f1f1f1;width:100%;position:relative;padding: 10px 28px 10px 30px;overflow:hidden;border-bottom: 1px solid #e5e5e5;display:flex;flex-direction:row;align-items:center;word-break:normal:flex-shrink:0;")
			img(src="/images/google.png" style="width:91px;display:inline-block;float:left;cursor:pointer;margin-top:5px;")
			div(style="float:left;background:#fff;cursor:text;height:30px;width: 50%; max-width: 590px; margin-left:80px;border:1px #cdcdcd solid;overflow:hidden")
				span(style="border-top:5px solid #000; border-left:5px solid transparent;border-right:5px solid transparent;float:right;width:0;height:0;display:block;margin-top:12px;margin-right:10px;")
			div(style="float:left;background:#4486F9;height:30px;width:60px;text-align:center;border-top-right-radius:2px;border-bottom-right-radius:2px;border:1px solid #4386FA;cursor:pointer;")
				img(src="/images/search.png", style="height:70%;")
			div(style="float:right;margin-left:auto")
				img(src="/images/menu.png" style="height:20px;cursor:pointer")
			div(style="float:right;margin-left: 25px")
				img(src="/images/notif.png" style="height:20px;cursor:pointer")
			div(style="float:right;margin-left:17px;margin-top:2px;")
				img(src="/images/profile.png" style="height:36px;cursor:pointer")
		div(style="background:#ffffff;width:100%;position:relative;padding: 10px 28px 10px 30px;overflow:hidden;border-bottom: 1px solid #e5e5e5;display:flex;flex-direction:row;align-items:center;flex-shrink:0;")
			div(style="color:#DD4B58;font-size:19px;margin-top:2px;cursor:pointer")
				| Gmail
				span(style="border-top:4px solid #D54937; border-left:4px solid transparent;border-right:4px solid transparent;width:0;height:0;display:inline-block;margin-left:5px;position:relative;top:-5px;")
			img(src="/images/tools.PNG", style="height:32px;margin-left:105px;cursor:pointer;padding:-2px;")
			img(src="/images/righttools.PNG", style="height:34px;margin-left:auto;cursor:pointer;padding:-2px;")
		div(style="background:#ffffff;width:100%;position:relative;overflow:hidden;display:flex;flex-direction:row; align-items:flex-start;")
			div(style="background:#ffffff;flex-shrink:0;position:relative;padding: 10px 28px 10px 30px;overflow:hidden;display:flex;flex-direction:column;align-items:flex-start;")
				button(style="color:#fff;font-size:11px;font-weight:bold;background:#D54937;border:0;padding:8px 28px;border-radius:2px;cursor:pointer")
					| COMPOSE
				div(style="margin-left:-30px;border-left:#D54937 4px solid;font-size:13px;font-weight:bold;color:#D54937;padding-left: 26px;padding-top:7px;padding-bottom:7px;margin-top:7px;cursor:pointer")
					| Inbox
				div(style="font-size:13px;padding-top:7px;padding-bottom:7px;cursor:pointer")
					| Starred
				div(style="font-size:13px;padding-top:7px;padding-bottom:7px;cursor:pointer")
					| Important
				div(style="font-size:13px;padding-top:7px;padding-bottom:7px;cursor:pointer")
					| Sent Mail
				div(style="font-size:13px;padding-top:7px;padding-bottom:7px;cursor:pointer")
					| Drafts
				div(style="font-size:13px;padding-top:7px;padding-bottom:7px;")
					span(style="border-top:5px solid transparent; border-left:5px solid #000;border-bottom:5px solid transparent;width:0;height:0;display:inline-block;margin-right:5px;margin-left:-10px;margin-top:3px;")
					| Categories
			div(style="background:#ffffff;flex-grow:1;position:relative;overflow:hidden;display:flex;flex-direction:column;align-items:stretch;padding: 10px 28px 10px 30px;max-height:100%;overflow:hidden;")
				div(style="font-size:18px;padding:0px 0px 10px 10px;border-bottom: 1px solid #e5e5e5;display:flex;flex-direction:row;align-items:center;")=subject
					div(style="background:#DDDDDD;display:inline-block;font-size:11px;padding:2px 5px;margin-left:20px;") Inbox&nbsp;&nbsp;&nbsp;&nbsp;x
				div(style="overflow:hidden;flex-grow:1;overflow-y:auto;display:flex;flex-direction:column;")
					div(style="padding:10px;display:flex;flex-direction:row;border-bottom: 1px solid #e5e5e5;")
						img(src="/images/picon.png", style="height:35px;")
						div(style="display:flex;flex-direction:column;align-items:stretch;padding:0px 10px;flex-grow:1")
							div(style="display:flex;flex-direction:row")
								div(style="display:flex;flex-direction:column")
									div(style="margin-top:-5px;")
										span(style="font-weight:bold;font-size:13px;display:inline;")=fro + ' '
										span(style="font-size:13px;display:inline;") &lt;#{faddress}&gt;
									div#moreInfo(style="margin-top:-5px;cursor:pointer")
										span(style="font-size:13px;display:inline;")=toline
										- if (bcc.name)
											span(style="font-size:13px; display:inline;") , bcc: #{bcc.name}
										span(style="border-top:4px solid #000; border-left:4px solid transparent;border-right:4px solid 	transparent;width:0;height:0;display:inline-block;margin-left:5px;position:relative;top:-2px;")
										div
											div#info-box(style="position:absolute;background:#fff;box-shadow: 0 0px 5px rgba(0,0,0,0.12);font-size:14px;padding-top:10px;padding-bottom:10px;line-height:2.0;padding-right:20px;display:none;")
												div 
													span(style="display:inline-block;width:95px;text-align:right;color:#aaa") from: 											
													span(style="padding-left:10px") <b>#{fro}</b> &lt;#{faddress}&gt;
												div
													span(style="display:inline-block;width:95px;text-align:right;color:#aaa") to:
													span(style="padding-left:10px") #{toline} &lt;#{taddress}&gt;
												- if (cc.name)
													div
														span(style="display:inline-block;width:95px;text-align:right;color:#aaa") bcc:
														span(style="padding-left:10px") #{bcc.name} &lt;#{bcc.email}&gt;
												- if (bcc.name)
													div
														span(style="display:inline-block;width:95px;text-align:right;color:#aaa") bcc:
														span(style="padding-left:10px") #{bcc.name} &lt;#{bcc.email}&gt;
												div
													span(style="display:inline-block;width:95px;text-align:right;color:#aaa") date:
													span(style="padding-left:10px")=timestamp
												div
													span(style="display:inline-block;width:95px;text-align:right;color:#aaa") subject:
													span(style="padding-left:10px")=subject
												div
													span(style="display:inline-block;width:95px;text-align:right;color:#aaa") mailed-by: 
												div
													span(style="display:inline-block;width:95px;text-align:right;color:#aaa") signed-by
												div
													span(style="display:inline-block;width:95px;text-align:right;color:#aaa") security
								div(style="font-size:13px;margin-left:auto;")=timestamp
								img(src="/images/replybutt.png" style="height:30px;margin-top:-7px;margin-left:5px;")
							div(style="margin-top:10px;flex-grow:1;font-size:14px")!=message
					div(style="padding:10px;display:flex;flex-direction:row;")
						img(src="/images/picon.png", style="height:35px;")
						div(style="margin-left: 10px;flex-grow:1;height:100px;border:1px #e5e5e5 solid;font-size:14px;color:#bbb;padding:10px")
							| Click here to <u>Reply</u> or <u>Forward</u>
	div#bottombar(style="position:absolute;bottom:0px;left:0px;right:0;text-align:center;background:rgba(0,0,0,0.9);padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:center;top:90%;")
		h4#timeleft(style="color:white;position:absolute;left: 10px") <span id="seconds">30</span> seconds remaining
		div
			div(style="display:inline-flex;width:300px;text-align:center;height:50px;background:#ccc;flex-direction:row;align-items:center;justify-content:center;cursor:pointer;margin-top:10px;", onclick="next(0)") Phishing
			div(style="display:inline-flex;width:300px;text-align:center;height:50px;background:#ccc;flex-direction:row;align-items:center;justify-content:center;cursor:pointer;margin-left:20px;margin-top:10px;", onclick="next(1)") Normal
		div#instructions(style="color:#2A5DB0;cursor:pointer;text-decoration:underline;position:absolute;right:10px;") Review Instructions (Timer will Pause)
	div#bottominstr(style="position:absolute;bottom:-100%;left:0px;right:0;text-align:center;background:rgba(0,0,0,0.9);padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;top:100%;")
		h2(style="color:white;") #{scenario.name}
		div(style="color:white;")=scenario.body

		h2(style="color:white;") Study Instructions
		div(style="color:white;") You are being presented a simulated email correspondence. You must put yourself in the mindset of the above scenario and determine whether or not the email presented to you is an attempt at phishing.  You have 45 seconds to make your decision and need to select one of the two option choices at the bottom of the page.  Please base your decision on whether or not you would identify it as phishing if it were to appear in your own inbox.  Furthermore, feel free to interact with the email as you would the normal Gmail interface, like looking at the message details by clicking the recipient's name;
			
		div#resume(style="color:#2A5DB0;cursor:pointer;text-decoration:underline;margin-top:25px;") Resume Study
	div#waitbar(style="position:absolute;bottom:0px;left:0px;right:0;text-align:center;background:rgba(0,0,0,1);padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;top:0;")
		h4(style="color:white;") Please wait <span id="wait">10</span> seconds

	audio#audio(autoplay, style="display:none;", loop)
		source(src=sound, type="audio/wav")
		source(src=sound, type="audio/flac")
		source(src=sound, type="audio/mpeg")

	//- Javascript
	script.
		var sound = "#{sound}".replace('/sounds/', '').replace('.mp3', '').replace('.wav', '');
		var soundNum = parseInt("#{soundNum}");		
		var emailIndex = parseInt("#{emailIndex}");
		var dt = new Date();
		var start = dt.toUTCString();
	script(src="/javascripts/study.js")